<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vite App</title>

        <link rel="stylesheet" href="./dist/assets/css/style.css" />

        <style>
            .disabled {
                cursor: not-allowed;
            }
            .disabled::after {
                content: "Coming Soon...";
                position: absolute;
                inset: 0;
                background: rgba(0, 0, 0, 0.3);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
            }
        </style>
    </head>
    <body>
        <div class="tw-flex">
            <div
                class="tw-border-black tw-p-2 tw-min-w-[280px] tw-max-w-[280px] tw-border-r tw-h-screen tw-pr-3"
            >
                <div class="tw-min-h-20 tw-font-bold tw-text-lg tw-text-center">
                    MKD Designer Plugin
                </div>
                <div class="tw-flex tw-gap-8 tw-flex-col">
                    <div
                        class="tw-flex tw-gap-2 tw-justify-center tw-items-center"
                    >
                        <button
                            class="tw-p-2 tw-border tw-rounded hover:tw-shadow tw-flex-1"
                            id="zoom-in"
                            title="Zoom in"
                        >
                            <svg
                                class="tw-size-6 tw-mx-auto"
                                stroke="currentColor"
                                fill="currentColor"
                                stroke-width="0"
                                viewBox="0 0 16 16"
                                height="15px"
                                width="15px"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"
                                ></path>
                                <path
                                    d="M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"
                                ></path>
                                <path
                                    fill-rule="evenodd"
                                    d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"
                                ></path>
                            </svg>
                        </button>
                        <button
                            class="tw-p-2 tw-border tw-rounded hover:tw-shadow tw-flex-1"
                            id="zoom-out"
                            title="Zoom out"
                        >
                            <svg
                                class="tw-size-6 tw-mx-auto"
                                stroke="currentColor"
                                fill="none"
                                stroke-width="2"
                                viewBox="0 0 24 24"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                height="200px"
                                width="200px"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <circle cx="11" cy="11" r="8"></circle>
                                <line
                                    x1="21"
                                    y1="21"
                                    x2="16.65"
                                    y2="16.65"
                                ></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                        </button>
                    </div>
                    <button
                        class="tw-p-2 tw-border tw-rounded hover:tw-shadow"
                        id="zoom-reset"
                        title="Reset Zoom"
                    >
                        <svg
                            class="tw-size-6 tw-mx-auto"
                            stroke="currentColor"
                            fill="none"
                            stroke-width="2"
                            viewBox="0 0 24 24"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            height="200px"
                            width="200px"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"
                            ></path>
                            <path d="M8 8l4 4"></path>
                            <path d="M12 8l-4 4"></path>
                            <path d="M21 21l-6 -6"></path>
                        </svg>
                    </button>
                    <div
                        id="active-shape-customization-block"
                        style="display: none"
                    >
                        <div
                            class="tw-flex tw-gap-2 tw-justify-center tw-items-center tw-mb-3"
                        >
                            <button
                                class="tw-p-2 tw-border tw-rounded hover:tw-shadow tw-flex-1"
                                id="rotate-left"
                                title="rotate left"
                            >
                                <svg
                                    class="tw-size-5 tw-mx-auto"
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 512 512"
                                    height="200px"
                                    width="200px"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"
                                    ></path>
                                </svg>
                            </button>
                            <button
                                class="tw-p-2 tw-border tw-rounded hover:tw-shadow tw-flex-1"
                                id="rotate-right"
                                title="Rotate right"
                            >
                                <svg
                                    class="tw-size-5 tw-mx-auto"
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 512 512"
                                    height="200px"
                                    width="200px"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"
                                    ></path>
                                </svg>
                            </button>
                        </div>
                        <h2 class="tw-font-medium">Walls and backsplahes</h2>
                        <input
                            type="text"
                            id="shapeName"
                            data-val="Shape Name"
                            class="tw-mt-2 tw-w-full tw-px-2 tw-font-medium tw-border-0 tw-ring-0"
                        />

                        <div class="tw-mt-3 tw-flex tw-items-center tw-gap-3">
                            <input
                                type="number"
                                id="shapeWidth"
                                data-val="Shape Width"
                                class="tw-mt-2 tw-w-full tw-px-2 tw-font-medium tw-border tw-border-black tw-rounded"
                                value="150"
                            />
                            X
                            <input
                                type="number"
                                id="shapeHeight"
                                data-val="Shape Width"
                                class="tw-mt-2 tw-w-full tw-px-2 tw-font-medium tw-border tw-border-black tw-rounded"
                                value="50"
                            />
                            IN
                        </div>
                        <div class="tw-mt-6">
                            <b>A:</b> <br />
                            <div class="tw-ml-6">
                                <input
                                    type="checkbox"
                                    class="wall"
                                    id="wall-a"
                                    data-wall="a"
                                />
                                <label for="wall-a" class="tw-ml-2"
                                    >Against the wall</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="backsplash"
                                    id="backsplash-a"
                                    data-wall="a"
                                />
                                <label for="backsplash-a" class="tw-ml-2"
                                    >Backsplash</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="can-be-rounded"
                                    id="can-be-rounded-a"
                                    data-wall="a"
                                />
                                <label for="can-be-rounded-a" class="tw-ml-2"
                                    >Corner A-D Can be Rounded?</label
                                >
                            </div>
                        </div>
                        <div class="tw-mt-6">
                            <b>B:</b> <br />
                            <div class="tw-ml-6">
                                <input
                                    type="checkbox"
                                    class="wall"
                                    id="wall-b"
                                    data-wall="b"
                                />
                                <label for="wall-b" class="tw-ml-2"
                                    >Against the wall</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="backsplash"
                                    id="backsplash-b"
                                    data-wall="b"
                                />
                                <label for="backsplash-b" class="tw-ml-2"
                                    >Backsplash</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="can-be-rounded"
                                    id="can-be-rounded-b"
                                    data-wall="b"
                                />
                                <label for="can-be-rounded-b" class="tw-ml-2"
                                    >Corner A-B Can be Rounded?</label
                                >
                            </div>
                        </div>
                        <div class="tw-mt-6">
                            <b>C:</b> <br />
                            <div class="tw-ml-6">
                                <input
                                    type="checkbox"
                                    class="wall"
                                    id="wall-c"
                                    data-wall="c"
                                />
                                <label for="wall-c" class="tw-ml-2"
                                    >Against the wall</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="backsplash"
                                    id="backsplash-c"
                                    data-wall="c"
                                />
                                <label for="backsplash-c" class="tw-ml-2"
                                    >Backsplash</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="can-be-rounded"
                                    id="can-be-rounded-c"
                                    data-wall="c"
                                />
                                <label for="can-be-rounded-c" class="tw-ml-2"
                                    >Corner B-C Can be Rounded?</label
                                >
                            </div>
                        </div>
                        <div class="tw-mt-6">
                            <b>D:</b> <br />
                            <div class="tw-ml-6">
                                <input
                                    type="checkbox"
                                    class="wall"
                                    id="wall-d"
                                    data-wall="d"
                                />
                                <label for="wall-d" class="tw-ml-2"
                                    >Against the wall</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="backsplash"
                                    id="backsplash-d"
                                    data-wall="d"
                                />
                                <label for="backsplash-d" class="tw-ml-2"
                                    >Backsplash</label
                                >
                                <br />
                                <input
                                    type="checkbox"
                                    class="can-be-rounded"
                                    id="can-be-rounded-d"
                                    data-wall="d"
                                />
                                <label for="can-be-rounded-d" class="tw-ml-2"
                                    >Corner C-D Can be Rounded?</label
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tw-w-full">
                <div
                    class="tw-flex tw-gap-4 tw-items-center tw-border-b tw-p-4"
                >
                    <div class="tw-flex tw-gap-4 tw-items-center">
                        <h4 class="tw-font-medium">Add Shapes</h4>
                        <div
                            class="tw-flex tw-gap-6 tw-items-center [&>div]:tw-min-w-32"
                        >
                            <button id="draw-square" class="tw-mx-auto" aria-label="draw-square-button">
                                <svg
                                    width="50"
                                    height="50"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="50" height="50" fill="gray" />
                                </svg>
                            </button>
                            <div class="tw-relative tw-text-center tw-flex">
                                <button id="draw-l" class="tw-mx-auto" aria-label="draw-l-button">
                                    <svg
                                        width="50"
                                        height="50"
                                        viewBox="0 0 37 36"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M15.7138 0.272705H0.11377V35.7272H15.7138V35.727L36.9864 35.727V20.127L15.7138 20.127V0.272705Z"
                                            fill="#797979"
                                        />
                                    </svg>
                                </button>
                            </div>
                            <div class="tw-relative tw-text-center tw-flex">
                                <button id="draw-u" class="tw-mx-auto disabled" aria-label="draw-u-button">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="50"
                                        height="50"
                                        viewBox="0 0 42 36"
                                        fill="none"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M0.632568 0.272705H16.2326V20.1273H26.1597V0.272705H41.7597V35.7272H37.5052V35.7273H2.0507V35.7272H0.632568V0.272705Z"
                                            fill="#797979"
                                        />
                                    </svg>
                                </button>
                            </div>
                            <div class="tw-relative tw-text-center tw-flex">
                                <button id="draw-circle" class="tw-mx-auto disabled" aria-label="draw-circle-button">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="50"
                                        height="50"
                                        viewBox="0 0 35 36"
                                        fill="none"
                                    >
                                        <ellipse
                                            cx="17.5"
                                            cy="18"
                                            rx="17.5"
                                            ry="18"
                                            fill="#797979"
                                        />
                                    </svg>
                                </button>
                            </div>
                            <div class="tw-flex tw-justify-center">
                                <div class="tw-mr-3">
                                    <input
                                        type="checkbox"
                                        id="enable-shape-drag"
                                        class="tw-peer tw-hidden"
                                    />
                                    <label
                                        for="enable-shape-drag"
                                        class="tw-text-gray-500 peer-checked:tw-brightness-0 tw-cursor-pointer"
                                        title="Enable Shape Drag"
                                    >
                                        <svg
                                            class="tw-size-10"
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="19"
                                            height="30"
                                            viewBox="0 0 19 30"
                                            fill="none"
                                        >
                                            <script xmlns="" />
                                            <path
                                                d="M18.7265 17.1354L1.57303 0.202157C0.94465 -0.290406 0 0.179848 0 0.916639V24.0577C0 24.5755 0.425657 24.9959 0.95 24.9959C1.19671 24.9959 1.43392 24.902 1.56946 24.7669L6.32184 20.6779L10.1979 29.6204C10.2639 29.773 10.3882 29.8934 10.5439 29.9556C10.62 29.9844 10.6997 29.9996 10.7793 29.9996C10.8644 29.9996 10.9494 29.982 11.029 29.9485L15.1079 28.2225C15.4295 28.0875 15.5793 27.72 15.4414 27.4024L11.6895 18.7423H18.0506C18.5749 18.7423 19.0006 18.3219 19.0006 17.8041C19.0006 17.6526 18.9614 17.4249 18.7271 17.136L18.7265 17.1354Z"
                                                fill="#797979"
                                            />
                                            <script xmlns="" />
                                        </svg>
                                    </label>
                                </div>
                                <input
                                    type="checkbox"
                                    id="enable-drag"
                                    class="tw-peer tw-hidden"
                                />
                                <label
                                    for="enable-drag"
                                    class="tw-text-gray-500 peer-checked:tw-text-black tw-cursor-pointer"
                                    title="Enable Stage Drag"
                                >
                                    <svg
                                        class="tw-size-10"
                                        stroke="currentColor"
                                        fill="currentColor"
                                        stroke-width="0"
                                        viewBox="0 0 512 512"
                                        height="200px"
                                        width="200px"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V336c0 1.5 0 3.1 .1 4.6L67.6 283c-16-15.2-41.3-14.6-56.6 1.4s-14.6 41.3 1.4 56.6L124.8 448c43.1 41.1 100.4 64 160 64H304c97.2 0 176-78.8 176-176V128c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V32z"
                                        ></path>
                                    </svg>
                                </label>

                                <button
                                    class="tw-p-2 tw-border tw-rounded hover:tw-shadow tw-ml-4"
                                    id="position-reset"
                                >
                                    Position Reset
                                </button>
                            </div>
                        </div>
                    </div>
                    <button
                        class="tw-p-2 tw-px-4 tw-border tw-rounded tw-text-xl hover:tw-shadow tw-ml-auto"
                        id="export"
                        title="Export canvas png and json data"
                    >
                        Export
                    </button>
                </div>
                <div id="app" class="tw-w-max tw-mx-auto"></div>
            </div>
        </div>

        <script
            src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"
        ></script>

        <script type="text/javascript" src="script.js" defer></script>
        <script type="module" src="./dist/mkd-plugin.es.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                document.querySelector(
                    "#app"
                ).innerHTML = `<div id="canvas-container"></div>`;

                /** @type {HTMLDivElement} */
                const container = document.querySelector(
                    "#app #canvas-container"
                );
                container.classList.add(
                    "tw-border",
                    "tw-w-max",
                    "tw-relative",
                    "tw-overflow-hidden"
                );

                const konvaManager = new KonvaManager(container);
            });
        </script>
    </body>
</html>
